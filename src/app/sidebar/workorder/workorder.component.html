<div *ngIf="!detailedWorkOrder" [ngClass]="{'loading':loadingScreen}">
<button class="btn btn-primary mt-2 me-5" style="float: right;" data-toggle="modal" data-target="#add-order" >+ Work Order</button>
<div class="row" style="height: calc(100vh - 140px); overflow: scroll; width: 100%;">
    <div class="col">
      <!-- <button *ngIf="sortoption" class="sort btn btn-secondary" (click)="removeFilter()">Sorted By: {{sortoption|titlecase}} &times;</button>
      <span *ngIf="searchText" class="search">Searched Text: {{searchText|titlecase}}</span> -->
      
      
      <table class="table" id="asset-table">
          <thead class="table-dark">
              <tr>
                  <th scope="col">#</th>
                  <th scope="col">Description</th>
                  <th scope="col">Customer</th>                 
                  <th scope="col">Status</th>
                  <th scope="col">Priority</th>
                  <th scope="col">Due Date</th>
                  <th scope="col">Assigned Technician</th>
                  <th scope="col">Asset Details</th>
                  <th scope="col">Last Update</th>
                  <th></th>
                </tr>
          </thead>
          <tbody>
              <tr *ngFor="let item of workorderlist" (mouseenter)="editButtonVisibile(workorderlist.indexOf(item)+1)" (mouseleave)="editButtonNotVisible()">
                  <th scope="row">{{workorderlist.indexOf(item)+1}}</th>
                  
            
                  <td style="color: black;"><b>{{item.description|titlecase}}</b></td>
                  <td>{{item.customer|titlecase}}</td>
                  <td><div class="onhold" *ngIf='(item.status=="onHold")'></div><div class="open" *ngIf='(item.status=="open")'></div><div class="progress" *ngIf='(item.status=="inProgress")'></div><div class="closed" *ngIf='(item.status=="closed")'></div>{{item.status|titlecase}}</td>
                  <td ><div style="border-radius: 4px;" [ngClass]="{'low':(item.priority  =='Low'),'medium':(item.priority=='Medium'),'high':(item.priority=='High'),'none':(item.priority=='None')}">{{item.priority}}</div></td>
                  <td [ngClass]="{'due-passed':checkDueDate(item.dueDate)}">{{item.dueDate|date:"shortDate"}} <i class="bi bi-exclamation-triangle" *ngIf="checkDueDate(item.dueDate)"></i></td>
                  <td>{{item.assignedTechnician|titlecase}}</td>
                  <td>{{item.assetDetails|titlecase}}</td>
                  <td>{{item.lastUpdate|titlecase}}</td>
                  <td>
                  <i class="bi bi-pencil" [ngClass]="{'editoption':!(editVisibility&&(editButtonId==workorderlist.indexOf(item)+1))}"  style="float: inline-start; margin: 15px 5px;" (click)="workOrderDetail(item.id)" [routerLink]="['/workorder',item.id]"></i>
                  <i class="bi bi-trash"  [ngClass]="{'editoption':!(editVisibility&&(editButtonId==workorderlist.indexOf(item)+1))}" style="color: red; float: inline-start; margin: 15px 5px;" (click)="deleteAsset(item.id)"></i>
                </td>
                  
                </tr>
               
          </tbody>
        </table>
    </div>
  </div>

  <div class="modal fade" id="add-order" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="exampleModalLongTitle">Add Work Order</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeBox>
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form [formGroup]="workorderform" (ngSubmit)="addWorkOrder()">
            <div >
              <label for="description">Description</label>
              <input type="text" class="form-control" id="description"  formControlName="description"  placeholder="Description">
             
            </div>
            <div class="form-group">
              <label for="customer">Customer</label>
              <input type="text" class="form-control" id="customer" formControlName="customer"  placeholder="Customer">
            </div>
            
              <div class="form-group">
                <label for="due-date">Due Date</label>
                <input type="date" class="form-control" id="due-date" formControlName="dueDate"  placeholder="Due Date">
              </div>
            
            
              <div class="form-group">
                <label for="technician">Technician</label>
                <input type="text" class="form-control" id="technician" formControlName="assignedTechnician"  placeholder="Technician">
              </div>
           
              <div class="form-group">
                <label for="priority">Priority</label>
                <select class="form-select" class="form-control" id="priority" formControlName="priority" >
                  <option selected>Select Priority</option>
                  <option value="None">None</option>
                  <option value="Low">Low</option>
                  <option value="Medium">Medium</option>
                  <option value="High">High</option>
                </select>
              </div>
              <div class="form-group">
                <label for="asset-details">Asset Details</label>
               
                <select class="form-select" class="form-control" id="asset-details" formControlName="assetDetails" #asset>
                  <option selected>Select Asset</option>
                  <option value={{[asset.name,asset.id]}} *ngFor="let asset of assetList">{{asset.name}}</option>
                  
                </select>
              </div>
            
            <button type="submit" class="btn btn-primary mt-3" (click)="closeBox.click()" [disabled]="workorderform.invalid">Submit</button>
          </form>
         
        </div>
      </div>
    </div>
  </div>
</div>
<app-workorder-details [id]="selectedWorkOrder" (backStatus)=onBackClicked($event) *ngIf="detailedWorkOrder"></app-workorder-details>