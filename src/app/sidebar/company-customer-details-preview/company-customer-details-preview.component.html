<ul class="nav justify-content-between header">
  
  <div class="header-centre">
    <!-- <img src='../../assets/logo.png'> -->
    <h1>AssetYug</h1>
  </div>
    
    
      <li class="nav-item d-flex align-items-center"  style="padding-right: 5px; margin: 15px; gap: 25px;">
      <b>Welcome</b> <span style="margin-left: -10px;">{{username}}</span>
      <i class="bi bi-bell-fill" matBadgeColor="warn" style="cursor: pointer; font-size: 20px;"></i>
      
      <a class="dropdown-toggle" type="button" data-toggle="dropdown" style="text-decoration: none;">
        <i class="bi bi-person-circle" style="font-size: 20px;"></i>
      </a>
       

        <ul class="dropdown-menu" style="margin-top: 25px;padding: 8px;margin-right: 10px;font-size: 16px;">
         
          <b class="dropdown-item" href="#" style="text-decoration: none; color: black;">Profile ({{email}})</b>
          <hr style="margin: 0.5rem 0;">
          <b class="dropdown-item">More Details</b>
          <b class="dropdown-item">Contact Support</b>
          <b class="dropdown-item">Manage account</b>
    
        </ul>
        <a (click)="logout()" style="cursor: pointer;">Log out</a>
      
      </li>
      
</ul>


<div class="side-navbar" (mouseover)="onHover()" (mouseleave)="offHover()" [ngClass]="{'nav-list-open':hoverOverSidebar}" >
  <ul class="nav-list">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16" style="margin-left: 10px;"> 
      <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
    </svg>
    <hr style="margin: 0.5rem 0;">
    <li class="nav-list-item" *ngFor="let item of sideBarOption"  [ngClass]="{'selected':(current==item.number)}" (click)="update(item.number)" >
        
      <i class={{item.icon}} style="color: white;"></i>
        <span >
          
          {{item.name}}
        </span>
      
    </li>
    <hr style="margin: 0.5rem 0;">

    <!-- <li class="nav-list-item" [routerLink]="['/setting-home']">
      <i class="bi bi-gear-fill"></i>
      <span>Settings</span>
    </li> -->

    
    <li class="nav-list-item" style="position: absolute; bottom: 0;" [routerLink]="['/setting-home']">
      <i class="bi bi-gear-fill"></i>
        <span >Settings</span>
    </li>
  </ul>
</div>

  
  <!-- <div class="content-area" [ngClass]="{'content-area-onhover':!hoverOverSidebar}"  style="overflow-y:scroll; height: calc(100vh - 100px);"> -->
<div class="content-area" [ngClass]="{'content-area-onhover':!hoverOverSidebar}">

  <div *ngIf="showAlert" class="alert" [ngClass]="'alert-' + alertType" role="alert" style="margin: 5px; position: fixed; width: 95%; z-index: 100;">
      {{ alertMessage }}
     
      <button type="button" class="btn-close" (click)="showAlert = false" aria-label="Close" style="float: right;"></button>
  </div>

  <!-- <div *ngIf="!loadingScreen"> -->
     
  
            <!-- <div class="mainform" style="width: calc(100vw - 90px);"> -->
              <!-- <div class="d-flex justify-content-around"  style="position: sticky; top: 0px; z-index: 1000; border: 1px solid lightgray;border-radius:10px ; padding: 10px 10px; background-color: white;"> -->
              
              
                <div style="display: flex; flex-direction: column; width: calc(100vw);">
                  <div class="back-button" style="padding: 0">
                    <div class="d-flex justify-content-between" style="padding: 3px 20px;">
                      <div style="margin-right: 30px;display: flex; justify-content: center; align-items: center;">
                        <a [routerLink]="['/dashboard']" style="margin-right: 20px; text-decoration: none; font-size: large;">&larr; Back to Customers</a>

                      <div class="v1"></div>
                      <div style="margin: 0; font-size: larger; color: black;"><b style="margin-left: 20px;">{{companyCustomer.name|titlecase}}</b></div>
                    </div>
                
                  <!-- <div class="d-flex justify-content-around"> -->
                
                  <div class="button-container">
                    <button class="centered-button btn btn-primary submit" style="margin: 5px; padding:7px 28px ;" [routerLink]="['/customer/',companyCustomerId]"
                      *ngIf="!(userRoleDetails?.customers!='full'&&userRoleDetails?.customers!='edit' &&userRole!='ADMIN')">Edit</button>
                  </div>
                  </div>
                  </div>
                
                <div class="d-flex justify-content-center" style="margin-top: 15px;">
                <div style="margin-top: 10px; color:  #74777a;" >
                <div class="card mt-2" style="margin-bottom: 40px;">
                
                <h1 style="display: flex; justify-content: center;margin-top: 10px;">Customer Details</h1>
                
                
                
                <div class="mainFields" style="font-size: 16px;" >
                  
                  <div>
                      <div style="display: flex; flex-direction: row;justify-content: center;">
                          <div style="margin: 0px 2vw;">
                              <label for="name" style="color: black; font-weight: bold;">Customer Name<span *ngIf="mandatoryFieldsMap.get('name')" class="text-danger">*</span></label>
                              <!-- <input type="text"  id="name"   [(ngModel)]=" companyCustomer.name" disabled> -->
                              <div style="margin: 10px;">
                              <p *ngIf="companyCustomer.name">{{companyCustomer.name}}</p>
                              <p *ngIf="!companyCustomer.name">&nbsp; </p>
                              <hr style="width: 20vw;">
                            </div>
                          </div>
                          <div style="margin: 0px 2vw;">
                              <label for="customer"  style="color: black; font-weight: bold;">Category<span *ngIf="mandatoryFieldsMap.get('category')" class="text-danger">*</span></label>
                              <!-- <input type="text"  id="category" [(ngModel)]="companyCustomer.category" disabled> -->
                              <div style="margin: 10px;">
                                <p *ngIf="companyCustomer.category">{{companyCustomer.category}}</p>
                                <p *ngIf="!companyCustomer.category">&nbsp; </p>
                                <hr style="width: 20vw;">
                              </div>
                              
                          </div>
                          
                          <div style="margin: 0px 2vw;">
                              <label for="status"  style="color: black; font-weight: bold;">Status<span *ngIf="mandatoryFieldsMap.get('status')" class="text-danger">*</span></label>
                              
                              <!-- <input id="status" type="text" [(ngModel)]=" companyCustomer.status"  disabled> -->
                              <div style="margin: 10px;">
                                <!-- <p *ngIf="companyCustomer.status">{{companyCustomer.status}}</p> -->
                                <p *ngIf="companyCustomer.status=='active'">Active</p>
                                <p *ngIf="companyCustomer.status=='inActive'">In Active</p>
                                <p *ngIf="!companyCustomer.status">&nbsp; </p>
                                <hr style="width: 20vw;">
                              </div>
                          </div>
                      </div>
                      <div style="display: flex; flex-direction: row;justify-content: center;"> 
                          <div style="margin: 0px 2vw">
                              <label for="phone"  style="color: black; font-weight: bold;">Phone<span *ngIf="mandatoryFieldsMap.get('phone')" class="text-danger">*</span></label>
                              
                              <!-- <input id="phone" type="text" [(ngModel)]=" companyCustomer.phone" disabled > -->
                              <div style="margin: 10px;">
                                <p *ngIf="companyCustomer.phone">{{companyCustomer.phone}}</p>
                                <p *ngIf="!companyCustomer.phone">&nbsp; </p>
                                <hr style="width: 20vw;">
                              </div>
                          </div>
                          <div  style="margin: 0px 2vw">
                              <label for="email"  style="color: black; font-weight: bold;">Email<span *ngIf="mandatoryFieldsMap.get('email')" class="text-danger">*</span></label>
                              
                              <!-- <input id="email" type="text" [(ngModel)]=" companyCustomer.email"  disabled> -->
                              <div style="margin: 10px;">
                                <p *ngIf="companyCustomer.email">{{companyCustomer.email}}</p>
                                <p *ngIf="!companyCustomer.email">&nbsp; </p>
                                <hr style="width: 20vw;">
                              </div>
                          </div>
                          <div style="margin: 0px 2vw;width: 20vw;">
                          </div>
                    </div>
                  </div>
                  <hr>
                  <h1 style="display: flex; justify-content: center;">Address</h1>
                  
                  <div >
                  
                     <div style="display: flex; flex-direction: row;justify-content: center;"> 
                          <div style="margin: 0px 2vw;">
                            <label for="address"  style="color: black; font-weight: bold;">Address/Street<span *ngIf="mandatoryFieldsMap.get('address')" class="text-danger">*</span></label>
                            <!-- <input type="text"  id="address"   [(ngModel)]=" companyCustomer.address" disabled> -->
                            <div style="margin: 10px;">
                              <p *ngIf="companyCustomer.address">{{companyCustomer.address}}</p>
                              <p *ngIf="!companyCustomer.address">&nbsp; </p>
                              <hr style="width: 20vw;">
                            </div>
                          
                          </div>
                          <div style="margin: 0px 2vw;">
                            <label for="apartment"  style="color: black; font-weight: bold;">Apartment<span *ngIf="mandatoryFieldsMap.get('apartment')" class="text-danger">*</span></label>
                            <!-- <input type="text"  id="apartment" [(ngModel)]="companyCustomer.apartment" disabled> -->
                            <div style="margin: 10px;">
                              <p *ngIf="companyCustomer.apartment">{{companyCustomer.apartment}}</p>
                              <p *ngIf="!companyCustomer.apartment">&nbsp;</p>
                              <hr style="width: 20vw;">
                            </div>
                          </div>
                        
                          <div style="margin: 0px 2vw;">
                            <label for="city"  style="color: black; font-weight: bold;">City<span *ngIf="mandatoryFieldsMap.get('city')" class="text-danger">*</span></label>
                            
                            <!-- <input id="city" type="text" [(ngModel)]=" companyCustomer.city"  disabled> -->
                            <div style="margin: 10px;">
                              <p *ngIf="companyCustomer.city">{{companyCustomer.city}}</p>
                              <p *ngIf="!companyCustomer.city">&nbsp; </p>
                              <hr style="width: 20vw;">
                            </div>
                          </div>
                      </div>
                      <div style="display: flex; flex-direction: row;justify-content: center; margin-bottom: 10px;"> 
                          <div style="margin: 0px 2vw;" >
                            <label for="state"  style="color: black; font-weight: bold;">State<span *ngIf="mandatoryFieldsMap.get('state')" class="text-danger">*</span></label>
                            
                            <!-- <input id="state" type="text" [(ngModel)]=" companyCustomer.c"  disabled> -->
                            <div style="margin: 10px;">
                              <p *ngIf="companyCustomer.state">{{companyCustomer.state}}</p>
                              <p *ngIf="!companyCustomer.state"> &nbsp;</p>
                              <hr style="width: 20vw;">
                            </div>
                          </div>
                          <div style="margin: 0px 2vw;" >
                            <label for="zipCode"  style="color: black; font-weight: bold;">Zip Code<span *ngIf="mandatoryFieldsMap.get('zipCode')" class="text-danger">*</span></label>
                            
                            <!-- <input id="zipCode" type="text" [(ngModel)]=" companyCustomer.zipCode"  disabled> -->
                            <div style="margin: 10px;">
                              <p *ngIf="companyCustomer.zipCode">{{companyCustomer.zipCode}}</p>
                              <p *ngIf="!companyCustomer.zipCode">&nbsp; </p>
                              <hr style="width: 20vw;">
                            </div>
                          </div>
                          <div style="margin: 0px 2vw;width: 20vw;">
                          </div>
                      
                       </div>
                 
                  
                 
                  </div>
                </div>
              </div>
                
                
                  
              <!-- </div> -->
          
          
          
              
             
            <!-- </div> -->
           
          
           
            <!-- <div class="option d-flex flex-row mb-4" style="width: 100%; margin: 30px auto;color: black;"> -->
            <div class="option d-flex flex-row bd-highlight" style="width: 100%; margin: 30px auto;color: black;">
              <span [ngClass]="{'selected-option':(currOption==1),'subTab':(currOption!=1)}" (click)="onClick(1)" >Assets</span>
              <span [ngClass]="{'selected-option':(currOption==2),'subTab':(currOption!=2)}" (click)="onClick(2)" class="subTab">Files</span>
              <!-- <span [ngClass]="{'selected-option':(currOption==3),'subTab':(currOption!=3)}" (click)="onClick(3)" class="subTab">Work Order</span>
              <span [ngClass]="{'selected-option':(currOption==4),'subTab':(currOption!=4)}" (click)="onClick(4)" class="subTab">Invoices</span> -->
              <span [ngClass]="{'selected-option':(currOption==5),'subTab':(currOption!=5)}" (click)="onClick(5)" class="subTab">Custom</span>
            </div>


            <div class="card mt-2" *ngIf="currOption==1" style="margin-bottom: 50px;" >
              <!-- <h1 style="display: flex; justify-content: center; margin-top: 10px;">Assets</h1> -->
              <div class="card-body">
                <table class="table" id="asset-table" *ngIf="customerAssetList?.length">
                  <thead class="table-dark">
                      <tr>
                          <!-- <th scope="col">#</th> -->
                          <th scope="col">ID</th>
                          <!-- <th scope="col">Image</th> -->
                          <th scope="col">Name</th>
                          <th scope="col">Serial Number</th>
                          <th scope="col">Category</th>
                          <!-- <th scope="col">Customer</th> -->
                          <th scope="col">Location</th>
                          <th scope="col">Status</th>
                        </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let item of customerAssetList" [routerLink]="['/assets',item.id]" target="_blank" style="cursor: pointer;">
                          <!-- <th scope="row">{{customerAssetList.indexOf(item)+1}}</th> -->
                          <td>{{item.assetId}}</td>
                          <!-- <td style="color: black;"><img src="../../../assets/asset_image.jpg" class="image" *ngIf="!item.image" ><img src={{item.image}} class="image"  *ngIf="item.image"  ></td> -->
                          <td>{{item.name|titlecase}}</td>
                          <td>{{item.serialNumber|titlecase}}</td>
                          <td>{{item.category|titlecase}}</td>
                          <!-- <td>{{item.customer|titlecase}}</td> -->
                          <td>{{item.location|titlecase}}</td>
                          <td *ngIf="item.status=='active'">Active</td>
                    <td *ngIf="item.status=='inactive'">In Active</td>
                    <td *ngIf="item.status=='outofservice'">Out Of Service</td>
                         
                        </tr>
                       
                  </tbody>
                </table>
                <mat-paginator [length]="totalLength"
                (page)="handlePageEvent($event)"
                [pageSize]="pageSize"
               style="font-size: 15.5px"
                aria-label="Select page">
                </mat-paginator>
          
              </div>
            </div>


            <div class="card mt-2" *ngIf="currOption==2" style="margin-bottom: 50px;">
              <!-- <h1 style="display: flex; justify-content: center; margin-top: 10px;">Files</h1> -->
             
              <div class="card-body">
                <!-- <div>
                  <input type="file" style="width: 100%"  (change)="fileUpload($event)"  #imageFile>
                  
                </div> -->
                <!-- <div class="progress my-3" *ngIf="currentFile">
                  <div
                    class="progress-bar progress-bar-info progress-bar-striped"
                    role="progressbar"
                    attr.aria-valuenow="{{ progress }}"
                    aria-valuemin="0"
                    aria-valuemax="100"
                    [ngStyle]="{ width: progress + '%' }"
                  >
                    {{ progress }}%
                  </div>
                  
                </div> -->
                <div *ngFor="let item of fileInfos">
                <div class="d-flex justify-content-between" style="margin: 5px;">
                  
                  <span style="font-size: large; background:none; border: none; justify-content:left;">{{item.fileName|titlecase}}</span>
                  <div style="font-size: 16px;">
                   
                    <a (click)="download(item.id,item.fileName)"  style="margin: 0px 5px;"><i class="bi bi-file-earmark-arrow-down"></i></a>
                      <a (click)="itemDeleteDetails(item.id)" data-target="#popupDelete" data-toggle="modal" style="margin: 0px 5px;"><i class="bi bi-trash-fill delete"></i></a>
                      
                  </div>
                </div>
                </div>
              </div>
            </div>


            <div class="card mt-2" *ngIf="currOption==3"  style="overflow-y:scroll; height: 200px;">
              <!-- <h1 style="display: flex; justify-content: center; margin-top: 10px;">Work Order</h1> -->
              <div class="card-body">
                <table class="table" id="workorder-table" *ngIf="customerWorkOrderList.length">
                  <thead class="table-dark">
                      <tr>
                          <th scope="col">#</th>
                          <th scope="col">Description</th>
                          <th scope="col">Customer</th>                 
                          <th scope="col">Status</th>
                          <th scope="col">Priority</th>
                          <th scope="col">Due Date</th>
                          <th scope="col">Assigned Technician</th>
                          <th scope="col">Asset Details</th>
                          <th scope="col">Last Update</th>
                        </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let item of customerWorkOrderList" target="_blank"  style="cursor: pointer;">
                          <th scope="row">{{customerWorkOrderList.indexOf(item)+1}}</th>
                          
                    
                          <!-- <td style="color: black;"><img src="../../../assets/asset_image.jpg" class="image" *ngIf="!item.image" ><img src={{item.image}} class="image"  *ngIf="item.image"  ></td> -->
                          <td>{{item.description}}</td>
                          
                          <td>{{item.customer|titlecase}}</td>
                          <td>{{item.status|titlecase}}</td>
                          <td>{{item.priority|titlecase}}</td>
                          <td>{{item.dueDate|titlecase}}</td>
                          <td>{{item.assignedTechnician|titlecase}}</td>
                          <td>{{item.assetDetails|titlecase}}</td>
                          <td>{{item.lastUpdate|titlecase}}</td>
                         
                        </tr>
                       
                  </tbody>
                </table>
              </div>
            </div>


            <div class="card mt-2" *ngIf="currOption==5" style="margin-bottom: 50px;">
              <!-- <h1 style="display: flex; justify-content: center; margin-top: 10px;">Customs</h1> -->
              <div class="card-body">
                <div class="extraFields" style="font-size: 16px;">
                  <div > 
                   <div *ngFor="let item of extraFieldName" >
                     <div *ngIf="!extraFieldString.includes(item.name) && showFieldsMap?.get(item.name)">
                       <span style="padding-left: 10px;">{{item.name|titlecase}}<span *ngIf="mandatoryFieldsMap.get(item.name) " class="text-danger">*</span></span>
                       <!-- <br><input id="value" type="{{item.type}}" [(ngModel)]="extraFieldValue[extraFieldName.indexOf(item)]" disabled> -->
                       <!-- <p *ngIf="mandatoryFieldsMap.get(item.name) && extraFieldValue[extraFieldName.indexOf(item)]==''" class="text-danger">*Mandatory</p> -->
                       <div style="margin: 10px;">
                        <!-- <input id="value" type="{{item.type}}" [(ngModel)]="extraFieldValue[extraFieldName.indexOf(item)]" disabled> -->
                        <!-- <p *ngIf="mandatoryFieldsMap.get(item.name) && extraFieldValue[extraFieldName.indexOf(item)]==''" class="text-danger">*Mandatory</p> -->
                        <p *ngIf="item.value">{{item.value}}</p>
                        <p *ngIf="!item.value">&nbsp; </p>
                        <hr style="width: 20vw;">
                      </div>
                     </div>
                   </div>
                  
                 </div>
                 <div >
                   <div *ngFor="let item of extraFields" >
                       <div *ngIf="showFieldsMap.get(item.name)">
                       <span style="padding-left: 10px;font-weight: bold;">{{item.name|titlecase}}<span *ngIf="mandatoryFieldsMap.get(item.name) " class="text-danger">*</span></span>
                       <!-- <br><input id="value" type="{{item.type}}" [(ngModel)]="item.value" disabled> -->
                       <!-- <p *ngIf="mandatoryFieldsMap.get(item.name) && item.value==''" class="text-danger">*Mandatory</p> -->
                       <div style="margin: 10px;">
                        <!-- <input id="value" type="{{item.type}}" [(ngModel)]="extraFieldValue[extraFieldName.indexOf(item)]" disabled> -->
                        <!-- <p *ngIf="mandatoryFieldsMap.get(item.name) && extraFieldValue[extraFieldName.indexOf(item)]==''" class="text-danger">*Mandatory</p> -->
                        <p *ngIf="item.value">{{item.value}}</p>
                        <p *ngIf="!item.value">&nbsp; </p>
                        <hr style="width: 20vw;">
                      </div>
                       </div>
                   </div>
                  
                  
                 </div>
               </div>
               
                 <div  *ngFor="let entry of companyCustomer?.extraFields | keyvalue">
                   <label for={{entry.key}}>{{entry.key+" "+entry.value.value}}</label>
                   <input type="text"  id="technician"  [ngModel]="entry.value.value"  disabled>
                 </div>
          
              </div>
            </div>


          </div>
        </div>
  </div>
</div>

<div class="modal fade" id="popupDelete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" style="padding: 13px 15px">
        <h2 class="modal-title" id="exampleModalLongTitle" style="margin:0; display: flex; justify-content: center;">Confirm Delete</h2>
        <button type="button" class="btn btn-light btn-sm ms-auto" data-dismiss="modal" aria-label="Close" style="border-radius: 10px;" #closeBox4>
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
      <div class="d-flex justify-content-center">
        <div class="modal-body">

            <div style="display: flex; justify-content: center; margin-top: 15px;">
              <button class="btn btn-light" data-dismiss="modal" aria-label="Close" (click)="closeBox4.click()" style="margin: 10px; width: 100px; margin-right: 30px; border: 1px solid #c0c0c0">Cancel</button>
              <button class="btn btn-danger" (click)="deleteFile()" (click)="closeBox4.click()" style="margin:10px;width: 100px;">Delete</button>
            </div>
         
        </div>
       
      </div>
    </div>
  </div>
</div>
       
  <!-- <div class="loading" *ngIf="loadingScreen"></div> -->
          